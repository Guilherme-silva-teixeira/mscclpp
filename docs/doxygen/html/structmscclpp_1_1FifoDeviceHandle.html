<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MSCCL++: mscclpp::FifoDeviceHandle Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MSCCL++
   </div>
   <div id="projectbrief">GPU-driven computation &amp; communication stack</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemscclpp.html">mscclpp</a></li><li class="navelem"><a class="el" href="structmscclpp_1_1FifoDeviceHandle.html">FifoDeviceHandle</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structmscclpp_1_1FifoDeviceHandle-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mscclpp::FifoDeviceHandle Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="fifo__device_8hpp_source.html">fifo_device.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for mscclpp::FifoDeviceHandle:</div>
<div class="dyncontent">
<div class="center"><img src="structmscclpp_1_1FifoDeviceHandle__coll__graph.png" border="0" usemap="#mscclpp_1_1FifoDeviceHandle_coll__map" alt="Collaboration graph"/></div>
<map name="mscclpp_1_1FifoDeviceHandle_coll__map" id="mscclpp_1_1FifoDeviceHandle_coll__map">
<area shape="rect" title=" " alt="" coords="5,95,204,121"/>
<area shape="rect" href="structmscclpp_1_1ProxyTrigger.html" title=" " alt="" coords="22,5,187,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7be1ddbf8d4ac632b7b218ba28c15171"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmscclpp_1_1ProxyTrigger.html">ProxyTrigger</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscclpp_1_1FifoDeviceHandle.html#a7be1ddbf8d4ac632b7b218ba28c15171">triggers</a></td></tr>
<tr class="memdesc:a7be1ddbf8d4ac632b7b218ba28c15171"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FIFO buffer that is allocated on the host via <code>cudaHostAlloc()</code>.  <a href="structmscclpp_1_1FifoDeviceHandle.html#a7be1ddbf8d4ac632b7b218ba28c15171">More...</a><br /></td></tr>
<tr class="separator:a7be1ddbf8d4ac632b7b218ba28c15171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a830e5d971d5de7944abe457a0affed12"><td class="memItemLeft" align="right" valign="top">uint64_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscclpp_1_1FifoDeviceHandle.html#a830e5d971d5de7944abe457a0affed12">tailReplica</a></td></tr>
<tr class="memdesc:a830e5d971d5de7944abe457a0affed12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replica of the FIFO tail that is allocated on device.  <a href="structmscclpp_1_1FifoDeviceHandle.html#a830e5d971d5de7944abe457a0affed12">More...</a><br /></td></tr>
<tr class="separator:a830e5d971d5de7944abe457a0affed12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada28c63ccea5a0fb8481872798a566b4"><td class="memItemLeft" align="right" valign="top">uint64_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscclpp_1_1FifoDeviceHandle.html#ada28c63ccea5a0fb8481872798a566b4">head</a></td></tr>
<tr class="memdesc:ada28c63ccea5a0fb8481872798a566b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FIFO head. Allocated on the device and only accessed by the device.  <a href="structmscclpp_1_1FifoDeviceHandle.html#ada28c63ccea5a0fb8481872798a566b4">More...</a><br /></td></tr>
<tr class="separator:ada28c63ccea5a0fb8481872798a566b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf8ab8a267d230c61c22120fa610d0d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmscclpp_1_1FifoDeviceHandle.html#aacf8ab8a267d230c61c22120fa610d0d">size</a></td></tr>
<tr class="memdesc:aacf8ab8a267d230c61c22120fa610d0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FIFO size.  <a href="structmscclpp_1_1FifoDeviceHandle.html#aacf8ab8a267d230c61c22120fa610d0d">More...</a><br /></td></tr>
<tr class="separator:aacf8ab8a267d230c61c22120fa610d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A concurrent FIFO where multiple device threads (the number of threads should not exceed the fifo size) can push work elements and a single host proxy thread consumes them.</p>
<p>The FIFO has a head pointer allocated on the device which starts at 0 and goes up to 2^64-1, which is almost infinity. There are two copies of the tail, one on the device, <a class="el" href="structmscclpp_1_1FifoDeviceHandle.html#a830e5d971d5de7944abe457a0affed12">FifoDeviceHandle::tailReplica</a>, and another on the host, namely, hostTail. The host always has the "true" tail and occasionally pushes it to the copy on the device. Therefore, most of the time, the device has a stale version. The invariants are: tailReplica &lt;= hostTail &lt;= head. The push() function increments head, hostTail is updated in <a class="el" href="classmscclpp_1_1Fifo.html#a1928c4910d23d3e9633e3330d3fd8a56">Fifo::pop()</a>, and it occasionally flushes it to tailReplica via <a class="el" href="classmscclpp_1_1Fifo.html#a8c6bf62637122f109737db0635cf97c7">Fifo::flushTail()</a>.</p>
<p>Duplicating the tail is a good idea because the FIFO is large enough, and we do not need frequent updates for the tail as there is usually enough space for device threads to push their work into. </p>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="ada28c63ccea5a0fb8481872798a566b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada28c63ccea5a0fb8481872798a566b4">&#9670;&nbsp;</a></span>head</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t* mscclpp::FifoDeviceHandle::head</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The FIFO head. Allocated on the device and only accessed by the device. </p>

</div>
</div>
<a id="aacf8ab8a267d230c61c22120fa610d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacf8ab8a267d230c61c22120fa610d0d">&#9670;&nbsp;</a></span>size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mscclpp::FifoDeviceHandle::size</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The FIFO size. </p>

</div>
</div>
<a id="a830e5d971d5de7944abe457a0affed12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a830e5d971d5de7944abe457a0affed12">&#9670;&nbsp;</a></span>tailReplica</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t* mscclpp::FifoDeviceHandle::tailReplica</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Replica of the FIFO tail that is allocated on device. </p>

</div>
</div>
<a id="a7be1ddbf8d4ac632b7b218ba28c15171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7be1ddbf8d4ac632b7b218ba28c15171">&#9670;&nbsp;</a></span>triggers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmscclpp_1_1ProxyTrigger.html">ProxyTrigger</a>* mscclpp::FifoDeviceHandle::triggers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The FIFO buffer that is allocated on the host via <code>cudaHostAlloc()</code>. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="fifo__device_8hpp_source.html">fifo_device.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
